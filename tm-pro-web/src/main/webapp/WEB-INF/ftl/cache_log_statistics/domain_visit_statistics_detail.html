<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- BootStrap Css -->
<link href="${rc.contextPath}/statics/ui-frame/css/bootstrap.min14ed.css?v=3.3.6" rel="stylesheet">
<!-- 字体图标 Css -->
<link href="${rc.contextPath}/statics/ui-frame/css/font-awesome.min93e3.css?v=4.4.0" rel="stylesheet">
<!-- BootStrap 日期插件 -->
<link href="${rc.contextPath}/statics/ui-frame/css/plugins/datapicker/datepicker3.css" rel="stylesheet">
<!-- Css 动画 -->
<link href="${rc.contextPath}/statics/ui-frame/css/animate.min.css" rel="stylesheet">
<!-- 基本样式 -->
<link href="${rc.contextPath}/statics/ui-frame/css/style.min862f.css?v=4.1.0" rel="stylesheet">
<style type="text/css">
thead>tr>th, tbody>tr>td{text-align:center}
.wrapper-content{padding:0}
.float-e-margins .btn{margin-bottom:0}
.form-group{margin-bottom:4px!important;}
.input-group{width: 100%;}
</style>
</head>
<body class="gray-bg">
	<div id="app" class="wrapper wrapper-content" style="padding: 20px">
	
		<div class="row">
			<div class="col-sm-12">

				<div class="ibox float-e-margins">
					<div class="ibox-content" style="padding-left: 0;padding-right: 0;">
						<div class="fixed-table-body">
							<table class="table table-hover table-condensed" style="table-layout: fixed;width: 100%">
								<thead>
									<tr>
										<th><div class="th-inner">序号</div></th>
										<th width="150"><div class="th-inner">URL</div></th>
										<th><div class="th-inner">总请求次数</div></th>
										<th><div class="th-inner">成功次数</div></th>
										<th><div class="th-inner">失败次数</div></th>
										<th><div class="th-inner">请求成功率</div></th>
										<th><div class="th-inner">Hit次数</div></th>
										<th><div class="th-inner">Miss次数</div></th>
										<th><div class="th-inner">请求命中率</div></th>
										<th><div class="th-inner">总流量（M）</div></th>
										<th><div class="th-inner">Hit流量（M）</div></th>
										<th><div class="th-inner">Miss流量（M）</div></th>
										<th><div class="th-inner">流量命中率</div></th>
										<th><div class="th-inner">平均下载速率（KB/S）</div></th>
										<th><div class="th-inner">更新时间</div></th>
									</tr>
								</thead>
								<tbody>
									<tr v-for="(item, index) in datas"  v-bind:title="item.domainName">
										<td>{{index+1}}</td>
										<td style="width:150px;white-space: nowrap;text-overflow: ellipsis;overflow: hidden;"><a href="javascript:;" @click="showFullName(item.domainName)">{{item.domainName}}</a></td>
										<td>{{item.visitCount}}</td>
										<td>{{item.visitSuccessCount}}</td>
										<td>{{item.visitFailCount}}</td>
										<td>{{item.visitSuccessRate}}%</td>
										<td>{{item.hitCount}}</td>
										<td>{{item.missCount}}</td>
										<td>{{item.hitRate}}%</td>
										<td>{{item.flowValue}}</td>
										<td>{{item.hitOutFlow}}</td>
										<td>{{item.missOutFlow}}</td>
										<td>{{item.hitOutFlowRate}}%</td>
										<td>{{item.dspeed}}</td>
										<td>{{item.updateTime}}</td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- Jquery Dom -->
	<script src="${rc.contextPath}/statics/ui-frame/js/jquery.min.js?v=2.1.4"></script>
	<!-- BootStrap Js -->
	<script src="${rc.contextPath}/statics/ui-frame/js/bootstrap.min.js?v=3.3.6"></script>
	<!-- 日期插件 -->
	<script src="${rc.contextPath}/statics/ui-frame/js/plugins/datapicker/bootstrap-datepicker.js"></script>
	<!-- 日期格式化插件 -->
	<script src="${rc.contextPath}/statics/ui-frame/plugins/moment/moment.min.js"></script>
	<!-- Vue MV-VM框架 -->
	<script src="${rc.contextPath}/statics/ui-frame/js/vue.min.js"></script>
	<!-- 框架工具 -->
	<script src="${rc.contextPath}/statics/ui-frame/js/frame-util.js"></script>

	<script type="text/javascript">
	    (function(_d, _w, _j, _v) {
	    	var data = {
	   			datas: [],
	   	    	searchParm: {
	   	    		domain: "${domain}"
	   	    	}
	   	    };
	   		
	   		var methods = {
				loadData: function() {
			   		const that = this;
			   		var load = parent.layer.load(1, {
			   		    shade: [0.4,'#000']
			   		});
			   		_j.post("${rc.contextPath}/domainVisitData/detail.do", that.searchParm , function(result) {
			   			parent.layer.close(load);
			   			if(result.status) {
							that.datas = result.data.domains;
			   			} else {
			   				parent.layer.msg("<span style='color:red'><i class='fa fa-info'></i> " + result.msg  +"</span>", {
				    			time: 2000
				    		});
			   			}
					}, "json");
			    },
			    search: function() {
			    	const that = this;
			    	that.loadData();
			    },
			    showFullName: function(fullName) {
			    	parent.layer.alert(fullName);
			    }
	   		}
	    	
	    	new _v({
	   	    	el: '#app',
	   	     	data: data,
	      		methods: methods,
	      		created: function (){
	      		},
		        mounted: function (){
		        	var that = this;
					that.loadData();
					
					_j("#data_1 .input-group.date").datepicker({
			    		todayBtn:"linked",
			    		keyboardNavigation:!1,
			    		forceParse:!1,
			    		calendarWeeks:!0,
			    		autoclose:!0
			    	});
		        }
	   	    })
	    	
	    })(document, window, jQuery, Vue)
	</script>
</body>
</html>
